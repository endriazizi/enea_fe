/* src/app/features/orders/order-builder.page.scss */
/* Mantengo le tue classi e aggiungo solo il necessario */

.menu-card { border-radius: 16px; box-shadow: 0 8px 16px rgba(0,0,0,.06); }
.menu-card .price { font-weight: 700; margin-bottom: 8px; }
.menu-card .actions { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }

.cart-summary { margin: 8px 12px; }
.cart-summary-spacer { height: 6px; }
.cart-footer {
  position: sticky; bottom: 0; z-index: 5;
  display: flex; gap: 12px; align-items: flex-start; justify-content: space-between;
  padding: 10px 12px; background: var(--ion-color-light);
  border-top: 1px solid rgba(0,0,0,.08);
  flex-wrap: wrap;
}
.cart-footer .covers { opacity: .8; font-size: .9em; }
.cart-footer .grand  { width: 100%; margin-top: 4px; }

.sec-title { font-weight: 600; margin-bottom: 6px; }
.chips-wrap { display: flex; gap: 8px; flex-wrap: wrap; }

/* Badge interni ai chip */
.chip-flag {
  font-size: 10px; line-height: 1; padding: 4px 6px; border-radius: 999px; margin-left: 6px;
  border: 1px solid transparent; user-select: none;
}
.chip-flag.senza    { color: #b00020; border-color: #b00020; }
.chip-flag.aggiungi { color: #0a7a3e; border-color: #0a7a3e; }

.px { margin-left: 6px; opacity: .85; }

/* === Filtri/Categorie ‚Äî stile Tavoli (aggiunto, nessuna logica cambiata) === */
.filters { display: grid; gap: 8px; margin: 8px 12px 10px; } /* ancora usata altrove */
.category-filter ion-segment { margin-top: 4px; }

/* Lista inset con look coerente al resto della PWA */
ion-list[inset] { border-radius: 12px; overflow: hidden; }
ion-item { --padding-start: 12px; --inner-padding-end: 12px; }

/* ========================================================================== */
/* üöÄ Aggiunte mirate per le nuove funzioni (senza toccare il tuo stile base) */
/* ========================================================================== */

/* Badge "Tavolo X" + sessione corrente */
.table-badge {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 6px 10px; border-radius: 999px;
  background: var(--ion-color-primary-tint);
  color: var(--ion-color-primary-contrast);
  font-weight: 600; font-size: .95em;
}

/* (pill sessione se la usi) */
.session-pill {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 4px 8px; border-radius: 999px; margin-left: 8px;
  background: rgba(0,0,0,.06); color: rgba(0,0,0,.75);
  font-size: .85em;
}
.session-pill .dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: #9e9e9e;
}
.session-pill.online .dot  { background: #11c15b; box-shadow: 0 0 0 2px rgba(17,193,91,.18); }
.session-pill.offline .dot { background: #ff5252; box-shadow: 0 0 0 2px rgba(255,82,82,.18); }

/* Toggle "Crea prenotazione alla conferma" */
.create-res-toggle {
  display: flex; align-items: center; gap: 10px;
  padding: 6px 10px; border-radius: 10px;
  background: rgba(0,0,0,.04);
}

/* Controlli stampa/comanda (alla conferma) */
.print-controls {
  display: grid; gap: 8px; align-items: center;
  grid-template-columns: 1fr auto;
}
@media (max-width: 460px){
  .print-controls { grid-template-columns: 1fr; }
}

/* Totale in evidenza nel footer */
.cart-footer .grand .amount {
  font-size: 1.35em; font-weight: 800;
}
.cart-footer .actions {
  display: flex; gap: 8px; flex-wrap: wrap; align-items: center;
}

/* Sezione Personalizza (base/extra) */
.customize-modal .section-title { font-weight: 700; margin: 8px 0 6px; }
.customize-modal .chips-wrap { margin-bottom: 8px; }

/* chip base (SENZA) e extra (AGGIUNGI) coerenti con i tuoi colori */
ion-chip.chip-base {
  --background: #fff;
  --color: #b00020;
  border: 1px solid #b00020;
  font-weight: 600;
}
ion-chip.chip-extra {
  --background: #fff;
  --color: #0a7a3e;
  border: 1px solid #0a7a3e;
  font-weight: 600;
}

/* Quantit√† extra compatta */
.qty-stepper {
  display: inline-flex; align-items: center; gap: 6px;
}
.qty-stepper .qty {
  min-width: 20px; text-align: center; font-weight: 700;
}

/* Nota manuale nel modal */
.customize-modal .note-area {
  margin-top: 6px;
}
.customize-modal .note-area ion-textarea {
  --background: rgba(0,0,0,.03); border-radius: 10px; padding: 6px 8px;
}

/* Preset salvati */
.preset-list { display: flex; gap: 8px; flex-wrap: wrap; }
.preset-chip {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 6px 10px; border-radius: 999px; background: rgba(0,0,0,.05);
  font-weight: 600; font-size: .9em;
}
.preset-chip .actions { display: inline-flex; gap: 6px; }

/* Righe carrello con personalizzazioni */
.cart-row-notes {
  font-size: .9em; opacity: .85;
}
.cart-row-extra {
  font-size: .9em; color: #0a7a3e; font-weight: 600;
}

/* Piccoli utili */
.muted { opacity: .7; }
.row-between { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
.nowrap { white-space: nowrap; }
.w-100 { width: 100%; }

.merge-banner {
  display: none;
  padding: 10px 12px; border-radius: 12px; margin: 8px 12px;
  background: #fff7e6; border: 1px solid #ffd591; color: #ad6800;
}
.merge-banner.open { display: block; }

.btn-compact {
  height: 28px; --padding-start: 10px; --padding-end: 10px; font-weight: 700;
}

.toolbar-inline {
  display: flex; flex-wrap: wrap; gap: 8px; align-items: center;
}

/* Miglioria UI per segment categorie (scrollabile su mobile) */
.category-filter ion-segment {
  overflow: auto hidden; white-space: nowrap;
  --background: rgba(0,0,0,.04);
  border-radius: 999px; padding: 4px;
}
.category-filter ion-segment-button {
  --padding-start: 10px; --padding-end: 10px;
}

.block { padding: 8px 12px; }
.block + .block { padding-top: 0; }

.card-soft {
  border-radius: 14px; background: rgba(0,0,0,.03);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.06);
}

.icon-tap {
  display: inline-flex; align-items: center; justify-content: center;
  width: 34px; height: 34px; border-radius: 999px;
  background: rgba(0,0,0,.05);
}

.compact-list ion-item { --min-height: 46px; }

/* =================== UI ‚ÄúDettagli ordine‚Äù (nuova versione) ================== */

.order-meta-card {
  margin: 8px 12px 12px;
  border-radius: 14px;
  background: rgba(0,0,0,.02);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.04);
}

.order-meta-header {
  --background: transparent;
  --inner-padding-end: 8px;
}

.order-meta-header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.order-meta-title {
  font-weight: 600;
}

.order-meta-summary {
  flex: 1;
  text-align: right;
  font-size: 0.8rem;
  opacity: .75;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.order-meta-body {
  padding-bottom: 4px;
}

/* Barra compatta STICKY quando il pannello √® collassato */
.order-meta-bar {
  position: sticky;
  top: 0;
  z-index: 4;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 8px 12px;
  background: var(--ion-color-light, #ffffff);
  box-shadow: 0 2px 4px rgba(0,0,0,.06);
  border-bottom: 1px solid rgba(0,0,0,.06);
}

.order-meta-bar-left { min-width: 0; }

.order-meta-bar-title {
  font-size: .9rem;
  font-weight: 600;
}

.order-meta-bar-summary {
  font-size: .75rem;
  opacity: .8;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.order-meta-bar-icon {
  flex: 0 0 auto;
}

/* =================== TOOLBAR STICKY (segment conferma + categorie) ========= */

.order-toolbar {
  position: sticky;
  top: 0;
  z-index: 3;
  padding: 6px 12px 8px;
  background: var(--ion-color-light, #ffffff);
  box-shadow: 0 1px 3px rgba(0,0,0,.04);
  display: grid;
  gap: 6px;
}

/* Quando il pannello √® collassato, la barra Dettagli occupa ~40px:
   sposto la toolbar appena sotto, cos√¨ restano attaccate. */
.order-toolbar--offset {
  top: 40px;
}

/* Segment stampa stile iOS (riusato per "Alla conferma" e centro comanda) */
.order-print-segment,
.order-category-segment {
  --background: rgba(0,0,0,.04);
  border-radius: 999px;
  padding: 2px;
}

.order-print-segment ion-segment-button,
.order-category-segment ion-segment-button {
  --border-radius: 999px;
  --indicator-box-shadow: 0 2px 4px rgba(0,0,0,.08);
  --indicator-color: #ffffff;
  --color: rgba(0,0,0,.6);
  --color-checked: #000000;
  text-transform: uppercase;
  font-weight: 600;
  font-size: 0.75rem;
}

/* Categorie scrollabili orizzontalmente su mobile */
.order-category-segment {
  overflow-x: auto;
  white-space: nowrap;
  scrollbar-width: none;
}
.order-category-segment::-webkit-scrollbar {
  display: none;
}
